from typing import List
from operator import itemgetter
#  347. Top K Frequent Elements


class Solution:
    def nlognSoln(self, nums: List[int], k: int) -> List[int]:
        freqs = {}
        for num in nums:
            freqs[num] = freqs.get(num, 0) + 1
        rankedItems = sorted(freqs.items(), key=itemgetter(1), reverse=True)
        toret = []
        for i in range(k):
            toret.append(rankedItems[i][0])
        return toret)
    def topKFrequent(self, nums: List[int], k: int) -> List[int]:
        freqs = {}
        for i in nums:
            if i not in freqs:
                freqs[i] = 1
            else:
                freqs[i] += 1
        rev = (
            {}
        )  # let the frequency be the key and value be array of nums with that freq
        for i in freqs:
            freq = freqs[i]
            if freq not in rev:
                rev[freq] = [i]
            else:
                rev[freq].append(i)
        res = list(freqs.values())
        res.sort(reverse=True)  # O(n log n)

        toret = []
        i = 0
        while i < k:
            key = res[i]
            arr = rev[key]
            for j in range(0, len(arr)):
                if i >= k:
                    break
                toret.append(arr[j])
                i += 1
        return toret


soln = Solution()
case1 = [1, 1, 1, 2, 2, 3]
print(soln.topKFrequent(case1, 2))
case2 = [1]
print(soln.topKFrequent(case2, 1))
case3 = [
    -377,
    227,
    854,
    581,
    -622,
    262,
    940,
    722,
    602,
    645,
    478,
    100,
    22,
    884,
    337,
    -227,
    -318,
    260,
    766,
    -772,
    1,
    156,
    155,
    626,
    79,
    799,
    939,
    -719,
    666,
    609,
    -762,
    374,
    -453,
    563,
    -293,
    870,
    633,
    -710,
    646,
    -964,
    980,
    767,
    -221,
    -111,
    617,
    -403,
    -16,
    592,
    -691,
    817,
    -176,
    -70,
    375,
    -436,
    259,
    -93,
    764,
    387,
    652,
    -897,
    -692,
    -460,
    -922,
    -694,
    118,
    67,
    5,
    -844,
    -420,
    964,
    346,
    -291,
    80,
    570,
    -253,
    -39,
    254,
    -839,
    -915,
    441,
    -99,
    -774,
    -901,
    621,
    -467,
    709,
    728,
    511,
    911,
    853,
    -873,
    -55,
    -123,
    -544,
    828,
    -237,
    -776,
    -295,
    239,
    -156,
    978,
    -158,
    583,
    328,
    -189,
    790,
    830,
    871,
    347,
    -56,
    -351,
    137,
    -428,
    -125,
    978,
    289,
    907,
    656,
    -37,
    905,
    385,
    -671,
    -471,
    605,
    -961,
    333,
    -32,
    -992,
    1000,
    -78,
    938,
    -62,
    81,
    -497,
    -445,
    -733,
    -858,
    -688,
    963,
    775,
    986,
    -204,
    -792,
    -394,
    947,
    651,
    -984,
    560,
    -994,
    563,
    -509,
    -641,
    17,
    -44,
    -173,
    -615,
    -801,
    -302,
    692,
    355,
    152,
    803,
    355,
    -7,
    -1,
    -172,
    -423,
    620,
    312,
    -845,
    162,
    540,
    883,
    -897,
    -152,
    -210,
    -223,
    -170,
    496,
    631,
    -333,
    -589,
    -464,
    -950,
    -177,
    -682,
    -23,
    130,
    243,
    -12,
    -630,
    825,
    249,
    -469,
    397,
    468,
    940,
    961,
    -120,
    -364,
    869,
    589,
    210,
    -551,
    223,
    -835,
    341,
    119,
    -501,
    583,
    492,
    276,
    -283,
    -275,
    100,
    -274,
    -126,
    441,
    -853,
    -166,
    836,
    783,
    643,
    217,
    -16,
    775,
    743,
    -697,
    -959,
    -577,
    -470,
    984,
    333,
    965,
    950,
    552,
    -733,
    616,
    211,
    -42,
    704,
    825,
    -235,
    -451,
    569,
    -635,
    814,
    -462,
    699,
    694,
    462,
    603,
    436,
    -917,
    -820,
    572,
    847,
    276,
    -536,
    -292,
    -295,
    -6,
    798,
    422,
    -285,
    301,
    331,
    309,
    -626,
    834,
    785,
    -814,
    -706,
    -277,
    -707,
    17,
    475,
    -933,
    -468,
    -743,
    623,
    -843,
    -652,
    -608,
    -798,
    -543,
    774,
    634,
    -640,
    -46,
    248,
    137,
    -563,
    887,
    -446,
    -943,
    994,
    28,
    -478,
    -960,
    -767,
    119,
    190,
    -153,
    -72,
    -83,
    795,
    -110,
    568,
    -846,
    -288,
    -70,
    799,
    93,
    -69,
    -278,
    -463,
    -59,
    968,
    -158,
    -897,
    -281,
    16,
    155,
    10,
    -11,
    22,
    679,
    668,
    519,
    -198,
    644,
    -180,
    659,
    -681,
    233,
    518,
    589,
    6,
    -178,
    853,
    -668,
    125,
    -516,
    97,
    711,
    622,
    988,
    125,
    701,
    641,
    -738,
    944,
    508,
    308,
    -633,
    743,
    -143,
    162,
    788,
    -263,
    552,
    -79,
    874,
    957,
    -446,
    685,
    683,
    -490,
    640,
    743,
    642,
    -40,
    -147,
    372,
    -259,
    608,
    -742,
    -298,
    -475,
    -876,
    -580,
    -56,
    -112,
    -828,
    639,
    -721,
    -970,
    -353,
    -179,
    -864,
    -656,
    -592,
    -299,
    -465,
    66,
    510,
    -739,
    726,
    -319,
    353,
    -146,
    -461,
    -972,
    -748,
    558,
    197,
    229,
    -973,
    84,
    647,
    -670,
    -451,
    109,
    -639,
    132,
    -476,
    -524,
    -133,
    558,
    98,
    292,
    -40,
    -94,
    324,
    483,
    644,
    887,
    -148,
    781,
    692,
    -796,
    -178,
    -647,
    -697,
    -541,
    412,
    228,
    739,
    -412,
    -411,
    716,
    517,
    -509,
    -325,
    247,
    -793,
    983,
    -453,
    -586,
    -306,
    390,
    -697,
    -124,
    -371,
    -499,
    -438,
    -387,
    876,
    -998,
    -859,
    -622,
    -594,
    715,
    -286,
    -188,
    281,
    -956,
    90,
    511,
    -196,
    291,
    463,
    -762,
    298,
    687,
    909,
    37,
    602,
    -768,
    675,
    -560,
    490,
    878,
    -203,
    -891,
    664,
    -174,
    -657,
    845,
    345,
    -802,
    887,
    139,
    -820,
    981,
    379,
    176,
    417,
    737,
    -725,
    298,
    236,
    -801,
    806,
    925,
    -201,
    -589,
    491,
    417,
    -992,
    -996,
    51,
    591,
    -330,
    204,
    -815,
    106,
    -440,
    869,
    -999,
    691,
    590,
    -356,
    -86,
    -684,
    -762,
    -67,
    -403,
    652,
    -97,
    461,
    113,
    -630,
    365,
    637,
    -474,
    490,
    350,
    -589,
    -379,
    -290,
    -854,
    -707,
    321,
    197,
    -307,
    587,
    966,
    452,
    -970,
    961,
    -925,
    688,
    -575,
    -231,
    144,
    -162,
    -739,
    877,
    466,
    846,
    160,
    468,
    999,
    57,
    -30,
    162,
    -509,
    -619,
    -408,
    166,
    -234,
    584,
    -699,
    -693,
    554,
    -961,
    773,
    648,
    12,
    -226,
    -868,
    -521,
    146,
    734,
    48,
    -457,
    -383,
    -991,
    612,
    -57,
    361,
    -718,
    956,
    -870,
    -139,
    -491,
    -952,
    166,
    -907,
    -87,
    -410,
    -813,
    805,
    428,
    -665,
    -167,
    762,
    -559,
    952,
    784,
    193,
    -353,
    -538,
    -802,
    922,
    630,
    -227,
    -618,
    500,
    0,
    -101,
    920,
    161,
    -641,
    424,
    -156,
    -661,
    -35,
    -426,
    485,
    600,
    740,
    -675,
    -961,
    -28,
    833,
    824,
    -12,
    700,
    -483,
    898,
    844,
    810,
    2,
    247,
    -943,
    859,
    671,
    -1,
    -893,
    -829,
    115,
    -49,
    -847,
    -292,
    -921,
    -329,
    -280,
    -659,
    61,
    -328,
    -928,
    963,
    -231,
    -341,
    -216,
    693,
    -158,
    -688,
    -24,
    461,
    170,
    -718,
    -292,
    -829,
    717,
    300,
    520,
    -530,
    -596,
    -966,
    281,
    807,
    468,
    745,
    964,
    -767,
    314,
    694,
    -46,
    793,
    -27,
    835,
    -738,
    476,
    -326,
    -972,
    -316,
    -284,
    -52,
    932,
    -538,
    -826,
    346,
    233,
    123,
    -631,
    490,
    703,
    -692,
    -110,
    477,
    349,
    522,
    281,
    522,
    -880,
    -682,
    308,
    247,
    -902,
    -257,
    437,
    -90,
    804,
    -70,
    448,
    -302,
    -456,
    -644,
    -414,
    919,
    -43,
    90,
    868,
    -92,
    -574,
    638,
    965,
    -962,
    -186,
    302,
    -986,
    -227,
    -437,
    -316,
    217,
    -651,
    204,
    -648,
    -595,
    -559,
    318,
    728,
    359,
    -616,
    -410,
    -274,
    -37,
    758,
    -949,
    710,
    -199,
    -531,
    753,
    239,
    -1,
    779,
    912,
    -226,
    496,
    954,
    -233,
    -885,
    -225,
    -712,
    340,
    -609,
    722,
    -240,
    -531,
    382,
    281,
    644,
    773,
    470,
    -893,
    475,
    -820,
    55,
    -495,
    777,
    818,
    912,
    185,
    -188,
    701,
    -404,
    798,
    -988,
    547,
    752,
    409,
    -468,
    732,
    -526,
    175,
    -169,
    982,
    953,
    537,
    -214,
    150,
    -960,
    -283,
    -257,
    790,
    46,
    479,
    709,
    -99,
    641,
    -41,
    467,
    97,
    612,
    61,
    529,
    -791,
    -649,
    948,
    801,
    114,
    778,
    869,
    906,
    -66,
    282,
    -387,
    988,
    -282,
    -104,
    -813,
    411,
    -870,
    -238,
    -902,
    194,
    148,
    500,
    596,
    -227,
    705,
    487,
    -938,
    331,
    410,
    297,
    814,
    -138,
    809,
    -467,
    -903,
    -923,
    223,
    557,
    -888,
    -987,
    384,
    -354,
    545,
    683,
    380,
    169,
    -787,
    773,
    309,
    -982,
    895,
    308,
    369,
    -861,
    -727,
    -278,
    490,
    -126,
    134,
    -141,
    -522,
    431,
    751,
    -318,
    546,
    -181,
    -587,
    -558,
    476,
    865,
    -15,
    -82,
    264,
    -663,
    -50,
    160,
    -432,
    -372,
    -237,
    -719,
    -5,
    -207,
    851,
    -408,
    458,
    205,
    -714,
    914,
    447,
    609,
    -794,
    -766,
    766,
    148,
    122,
    -129,
    827,
    -530,
    -244,
    999,
    -111,
    -368,
    -351,
    -749,
    -939,
    256,
    -975,
    688,
    128,
    -73,
    115,
    916,
    615,
    8,
    -385,
    82,
    -346,
    305,
    -538,
    -119,
    -291,
    -146,
    -425,
    281,
    50,
    579,
    -765,
    -710,
    -119,
    241,
    -574,
    637,
    -623,
    -824,
    299,
    994,
    813,
    37,
    184,
    910,
    -66,
    -274,
    -411,
    224,
    -403,
    134,
    388,
    742,
    936,
    743,
    -197,
    585,
    952,
    478,
    662,
    -779,
    -294,
    -371,
    -777,
    -776,
    110,
    -682,
    983,
    929,
    -118,
    259,
    -588,
    -11,
    408,
    85,
    926,
    540,
    -298,
    624,
    378,
    236,
    -139,
    775,
    -233,
    -195,
    313,
    -602,
    -970,
    342,
    -856,
    683,
    610,
    -152,
    -495,
    16,
    958,
    666,
    -996,
    49,
    -160,
    738,
    596,
    378,
    522,
    841,
    -138,
    952,
    -782,
    860,
    146,
    120,
    726,
    -541,
    -624,
    -784,
    -684,
    -394,
    -318,
    846,
    -96,
    680,
    -122,
    508,
    624,
    847,
    741,
    -147,
    -115,
    245,
    -758,
    677,
    94,
    929,
    30,
    -744,
    -310,
    -901,
    464,
    -588,
    55,
    -981,
    18,
    -458,
    -261,
    -340,
    494,
    629,
    317,
    547,
    754,
    289,
    459,
    537,
    448,
    304,
    -340,
    84,
    -924,
    -227,
    -145,
    792,
    -980,
    9,
    292,
    -914,
    694,
    752,
    361,
    663,
    -682,
    102,
    424,
    152,
    392,
    895,
    737,
    -632,
    -259,
    798,
    -855,
    503,
    316,
    361,
    -635,
    -269,
    -180,
    -305,
    -152,
    341,
    -897,
    -623,
    -671,
    505,
    -772,
    703,
    433,
    -775,
    -327,
    163,
]

print(soln.topKFrequent(case3, 4))
